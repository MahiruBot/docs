# Геншин Карточки

Махиру предоставляет вам крутой API для генерации карточек, который вы можете использовать после подключения своей учетной записи HoYoLab. Это позволяет создавать прямые ссылки на ваши карточки, которые обновляются в режиме реального времени.

## Структура URL-адреса

Базовый URL-адрес для API карточек:
```yaml
https://mahiru.one/g/
```

Структура URL-адреса выглядит следующим образом:
```yaml
https://mahiru.one/g/{userId}/{method}
```

- **userId** – Идентификатор пользователя, чью карточку вы хотите получить. Вы можете узнать его [тут](../dashboard/pages/settings/for-developers.md).

- **method** – Метод, который вы хотите использовать. См. таблицу ниже со списком всех доступных методов. 

## Методы

Каждый метод соответствует определенной команде. См. список всех команд, имеющих методы в API Геншин Карточек, ниже.

Некоторые методы требуют аутентификации. См. секцию [Приватность и безопасность](#_7).

| Метод         | Команда                                                                   | Структура URL-адреса                              | Требует аутентификацию  |
| ------------- | ------------------------------------------------------------------------- | ------------------------------------------------- | ----------------------- |
| `profile`     | [`genshin_profile`](../commands/commands-list/genshin/profile.md)         | `https://mahiru.one/g/{userId}/profile`           | :material-close: Нет    |
| `abyss`       | [`genshin_abyss`](../commands/commands-list/genshin/abyss.md)             | `https://mahiru.one/g/{userId}/abyss`             | :material-close: Нет    |
| `exploration` | [`genshin_exploration`](../commands/commands-list/genshin/exploration.md) | `https://mahiru.one/g/{userId}/exploration`       | :material-close: Нет    |
| `notes`       | [`genshin_notes`](../commands/commands-list/genshin/notes.md)             | `https://mahiru.one/g/{userId}/notes`             | :material-check: Да     |
| `tcg`         | [`genshin_tcg`](../commands/commands-list/genshin/tcg.md)                 | `https://mahiru.one/g/{userId}/teapot`            | :material-close: Нет    |
| `teapot`      | [`genshin_teapot`](../commands/commands-list/genshin/teapot.md)           | `https://mahiru.one/g/{userId}/teapot`            | :material-close: Нет    |
| `characters`  | [`genshin_characters`](../commands/commands-list/genshin/characters.md)   | `https://mahiru.one/g/{userId}/characters`        | :material-close: Нет    |
| `character`   | [`genshin_characters`](../commands/commands-list/genshin/characters.md)   | `https://mahiru.one/g/{userId}/character/{characterId}`  | :material-close: Нет    |

## Параметры запроса

Параметры запроса могут помочь вам настроить изображение, которое вы хотите получить.

### Стандартные параметры

Стандартные параметры, которые присутствуют в каждом методе:

- **theme** `Литерал['light', 'dark'] (опционально)` – Тема изображения. Может быть установлена на `light` (светлая) либо `dark` (тёмная).
- **language** `Литерал['ru', 'en'] (опционально)` – Язык изображения. Может быть установлен на `ru` (Русский) либо `en` (Английский).
- **authkey** `строка (опционально)` – Ваш ключ аутентификации. Необходим для методов, которые требую аутентификации и для тех, которым вы отключили опцию [«Показывать другим»](../dashboard/pages/game-integrations/genshin.md#_12) в Панели управления.

### Уникальные параметры

Некоторые методы имеют уникальные параметры:

| Метод           | Параметры  | Тип                                            | Описание                                                        |
| --------------- | ---------- | ---------------------------------------------- | --------------------------------------------------------------- |
| `abyss`         | `schedule` | `Литерал['current', 'previous'] (опционально)` | Период бездны. `current` (текущий) либо `previous` (предыдущий) |

### Добавление параметров

Чтобы добавить параметры, в конец URL-адреса, добавляется `?`, за которым сразу следует параметр:
```yaml
https://mahiru.one/g/{userId}/{method}?language=en&theme=dark
```

## Приватность и безопасность

???+ Danger "Предупреждение"

    Ни в коем случае не делитесь с кем-либо URL-адресами, содержащими ваш ключ аутентификации и не загружайте такие изображение, используя их URL-адреса. Каждый, у кого есть ваш ключ авторизации, может получить непредвиденный доступ к вашим данным, которые хранит Махиру. Если вы случайно слили свой ключ авторизации, свяжитесь с нами в нашей [Телеграм группе](https://t.me/MahiruCommunity), чтобы сбросить его как можно скорее.

Вы можете ограничить другим пользователям доступ к вашим карточкам, отключив опцию [«Показывать другим»](../dashboard/pages/game-integrations/genshin.md#_12) для методов, которыми вы не хотите делится. (1)
{ .annotate }

1. Некоторые методы всегда требуют аутентификации. Это те, которыми вы, скорее всего, не захотите делиться, например, заметки (`notes`). См. методы, которые всегда требуют аутентификации в [таблице методов](#_2).

Для аутентификации запроса вам необходимо передать ключ аутентификации в URL-адресе:
```yaml
https://mahiru.one/g/{userId}/{method}?authkey=ABCDEFG12345
```

## Ограничения

Каждый метод имеет ограничение в 10 запросов/в минуту/на один IP. Если вы превысите данный лимит, скорость запросов для вас будет ограничена.

## Кэширование

Для создания каждого изображения требуется значительный объем ресурсов сервера. Поэтому мы используем кэширование. Время кэширования каждого метода, кроме `notes`, составляет один час. Для метода `notes` это 3600 секунд (5 минут).